 <!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Page Title</title>
<meta name="viewport" content="width=device-width,initial-scale=4">
<link rel="stylesheet" href="charts.min.css">
<style>
</style>
<head>
    <!-- <script src="chart.min.js"></script>
    <script type="text/javascript" src="popup.js"></script> -->
</head>

<body>

<div width="800" height="800" class="">
 <h1> CarboFashion</h1>
 <p>Save the planet one stylish choice at a time!</p>

<!-- <img src="fashion.png" alt="shirt" style="width:100%"> -->

<table width="400" height="400" class="charts-css column multiple stacked show-labels show-data-on-hover" id="main_bar">

  <caption></caption>

  <thead>
    <tr>
      <th scope="row"> CO2e </th>
    </tr>
  </thead>

  <tbody id="tbody">
    <tr id="tr">
      <th scope="col" id="th"> This Item </th>
        <td style="--size: calc(20 / 85 ); --color: orangered" id="cost"> <span class="data"> Flight: 20 </span> </td>
        <td style="--size: calc(30 / 85 ); --color: orange" id="shipping"> <span class="data"> Prod: 30 </span> </td>
        <td style="--size: calc(10 / 85 ); --color: lightcoral" id="waste"> <span class="data"> Truck: 10 </span> </td>
    </tr>
    <tr>
        <th scope="col">Avg. Item</th>
        <td style="--size: calc(10 / 85 ); --color:green"> <span class="data"> Flight: 10 </span> </td>
        <td style="--size: calc(5 / 85 ); --color:olivedrab"> <span class="data"> Prod: 5 </span> </td>
        <td style="--size: calc(10 / 85 ); --color:palegreen"> <span class="data"> Truck: 10 </span> </td>
    </tr>
  </tbody>

</table>
</div>

<script>
    window.onload = function() {
        chrome.storage.onChanged.addListener(function (changes, namespace) {
            for (let [key, { oldValue, newValue }] of Object.entries(changes)) {
                if (key === "emissions") {
                    if (newValue) {
                        var main_bar = document.getElementById('main_bar');
                        var tbody = main_bar.getElementById('tbody');
                        var tr = tbody.getElementById('tr');
                        var th = tr.getElementById('th');
                        var td_cost = th.getElementById('cost');
                        var td_shipping = th.getElementById('shipping');
                        var td_waste = th.getElementById('waste');
                        console.log("here") 
                        // td_cost.innerHTML = `<td style="--size: calc(${newValue["cost"]} / 85 ); --color: orangered" id="cost"> <span class="data"> Prod: ${td_cost.UPDATEVAL ?? newValue["cost"]} </span> </td>`
                        // td_shipping.innerHTML =`<td style="--size: calc(${newValue["shipping"]} / 85 ); --color: orange" id="cost"> <span class="data"> Flight: ${td_cost.UPDATEVAL ?? newValue["shipping"]} </span> </td>` 
                        // td_shipping.innerHTML =`<td style="--size: calc(${newValue["waste"]} / 85 ); --color: orange" id="cost"> <span class="data"> Garbage: ${td_cost.UPDATEVAL ?? newValue["waste"]} </span> </td>` 
                        td_cost.innerHTML = `<span class="data"> Cost: ${newValue["cost"]}</span>`
                        td_shipping.innerHTML = `<span class="data"> Flight: ${newValue["shipping"]}</span>`
                        td_waste.innerHTML = `<span class="data"> Waste: ${newValue["waste"]}</span>`
                    }
                }
            }
        });
    }
</script>

<!-- <div><canvas id="myChart" ></canvas></div> -->

</body>
</html> 